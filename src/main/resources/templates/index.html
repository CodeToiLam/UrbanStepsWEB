<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org" 
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/main}">

<head>
  <title layout:fragment="title">UrbanSteps - Trang Chủ</title>
  <th:block layout:fragment="extra-css">
    <link rel="stylesheet" type="text/css" href="/css/index.css">
  </th:block>
</head>

<div layout:fragment="content">
  <!-- Banner Section -->
  <div class="banner-section" th:if="${bannerImages != null and !bannerImages.empty}">
    <div class="banner-container">
      <div th:each="bannerImage : ${bannerImages}" class="banner-slide">
        <img th:src="@{'/' + ${bannerImage}}" 
             alt="Banner" 
             class="banner-image">
      </div>
    </div>
  </div>

  <div class="container">
    <h2 class="section-title">Flash Deal</h2>
    <div class="product-container">
      <div th:each="product : ${flashDealProducts}" class="product-card">
        <a th:href="@{/san-pham/chi-tiet/{id}(id=${product.id})}" class="product-link">
          <img th:src="${product.idHinhAnhDaiDien != null ? product.idHinhAnhDaiDien.duongDan : '/images/no-image.jpg'}" 
               th:alt="${product.tenSanPham}"
               onerror="this.src='/images/no-image.jpg';"
               class="product-image">
          <div class="product-info">
            <h3 th:text="${product.tenSanPham}">Tên sản phẩm</h3>
            <p class="product-price" th:text="${#numbers.formatCurrency(product.giaBan)}">Giá</p>
            <p class="product-brand" th:text="${product.thuongHieu != null ? product.thuongHieu.tenThuongHieu : 'N/A'}">Thương hiệu</p>
          </div>
        </a>
      </div>
    </div>
    <div class="view-all">
      <a href="/san-pham" th:href="@{/san-pham}">Xem tất cả</a>
    </div>
  </div>

  <div class="container">
    <h2 class="section-title">Top Popular</h2>
    <div class="product-container">
      <div th:each="product : ${topPopularProducts}" class="product-card">
        <a th:href="@{/san-pham/chi-tiet/{id}(id=${product.id})}" class="product-link">
          <img th:src="${product.idHinhAnhDaiDien != null ? product.idHinhAnhDaiDien.duongDan : '/images/no-image.jpg'}" 
               th:alt="${product.tenSanPham}"
               onerror="this.src='/images/no-image.jpg';"
               class="product-image">
          <div class="product-info">
            <h3 th:text="${product.tenSanPham}">Tên sản phẩm</h3>
            <p class="product-price" th:text="${#numbers.formatCurrency(product.giaBan)}">Giá</p>
            <p class="product-brand" th:text="${product.thuongHieu != null ? product.thuongHieu.tenThuongHieu : 'N/A'}">Thương hiệu</p>
          </div>
        </a>
      </div>
    </div>
    <div class="view-all">
      <a href="/san-pham" th:href="@{/san-pham}">Xem tất cả</a>
    </div>
  </div>
</div>

</html>