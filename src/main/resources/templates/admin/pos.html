<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Bán hàng tại quầy (POS)</title>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
  <link rel="stylesheet" href="/css/admin.css">
  <link rel="stylesheet" href="/css/pos.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" crossorigin="anonymous" />
</head>
<body>
<div class="layout-admin">
  <header class="admin-main-header">
    <div class="admin-header-bar">
      <div class="admin-header-title">Admin-UrbanSteps</div>
      <div class="admin-header-actions">
        <span>Xin chào Admin!</span>
        <form action="/dang-xuat" method="post" style="display: inline; margin-left: 10px;">
          <button type="submit" class="logout-btn">Đăng xuất</button>
        </form>
      </div>
    </div>
  </header>
  <div class="admin-layout">
    <nav class="admin-sidebar">
      <h5>Xin chào Admin!</h5>
      <ul>
  <li><a href="/admin/quan-ly-san-pham"><i class="bi bi-box-seam"></i> Quản lý Sản phẩm</a></li>
  <li><a href="/admin/quan-ly-phieu-giam-gia"><i class="bi bi-tag-fill"></i> Quản lý phiếu giảm giá</a></li>
  <li><a href="/admin/ban-hang-tai-quay"><i class="fa-solid fa-cash-register"></i> Bán hàng tại quầy (POS)</a></li>
        <li><a href="/admin/admin-log.html"><i class="bi bi-clock-history"></i> Lịch sử hoạt động Admin</a></li>
        <li><a href="/"><i class="bi bi-house"></i> Về trang chủ</a></li>
      </ul>
    </nav>
    <main class="admin-main-content">
      <div>
        <!-- Xóa nút về trang admin, đã có sidebar -->
        <div class="pos-title">Bán hàng tại quầy (POS)</div>
        <!-- Tìm sản phẩm -->
        <div class="pos-section">
          <label for="search">Tìm sản phẩm:</label>
          <div style="position:relative;display:inline-block;width:100%;max-width:480px;">
            <input type="text" id="search" placeholder="Nhập tên hoặc mã sản phẩm..." oninput="liveSearchProducts()" autocomplete="off" style="width:100%;">
            <div id="search-dropdown" class="search-dropdown" style="display:none;"></div>
          </div>
          <button class="pos-btn" onclick="searchProducts()">Tìm kiếm</button>
          <div id="search-results"></div>
        </div>
        <!-- Giỏ hàng -->
        <div class="pos-section">
          <h3>Giỏ hàng</h3>
          <table class="pos-table" id="cart-table">
            <thead>
              <tr>
                <th>Tên sản phẩm</th>
                <th>Giá</th>
                <th>Số lượng</th>
                <th>Thành tiền</th>
                <th>Xóa</th>
              </tr>
            </thead>
            <tbody></tbody>
          </table>
          <div class="pos-total">Tổng tiền: <span id="cart-total">0</span> VNĐ</div>
        </div>
        <!-- Thông tin khách hàng & thanh toán -->
        <div class="pos-section">
          <h3>Thông tin khách hàng & thanh toán</h3>
          <form id="pos-form" onsubmit="submitOrder(event)">
            <div>
              <label>Họ tên khách hàng:</label>
              <input type="text" name="hoTen" placeholder="Khách vãng lai nếu để trống">
            </div>
            <div>
              <label>Số điện thoại:</label>
              <input type="text" name="sdt" placeholder="Tùy chọn">
            </div>
            <div>
              <label>Ghi chú:</label>
              <input type="text" name="ghiChu" placeholder="Ghi chú đơn hàng">
            </div>
            <div>
              <label>Phương thức thanh toán:</label>
              <select name="phuongThucThanhToan" id="payment-method" onchange="updatePaymentFields()">
                <option value="1">Tiền mặt</option>
                <option value="2">Chuyển khoản</option>
              </select>
            </div>
            <div id="cash-field" style="display:none;">
              <label>Tiền mặt:</label>
              <input type="number" name="tienMat" min="0" value="0">
            </div>
            <div id="bank-field" style="display:none;">
              <label>Tiền chuyển khoản:</label>
              <input type="number" name="tienChuyenKhoan" min="0" value="0">
              <div style="margin-top:8px;">
                <label>Mã QR chuyển khoản:</label><br>
                <img src="/images/qr-code.jpg" alt="QR chuyển khoản" style="max-width:160px;border-radius:8px;box-shadow:0 2px 8px #ccc;">
              </div>
            </div>
            <button class="pos-btn" type="submit"><i class="fa-solid fa-cart-plus"></i> Tạo đơn hàng</button>
          </form>
          <div id="order-result"></div>
        </div>
      </div>
    </main>
  </div>
  <footer class="admin-footer">
    <p>© 2025 UrbanSteps. All rights reserved.</p>
  </footer>
</div>
<script src="/js/pos.js"></script>
<script>
function updatePaymentFields() {
  var method = document.getElementById('payment-method').value;
  document.getElementById('cash-field').style.display = (method === '1') ? 'block' : 'none';
  document.getElementById('bank-field').style.display = (method === '2') ? 'block' : 'none';
}
window.onload = updatePaymentFields;
</script>
</body>
</html>
