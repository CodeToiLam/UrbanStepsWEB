<!DOCTYPE html>
<html lang="vi" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout-admin}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Quản lý chi tiết sản phẩm | Manage Product Details</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/admin.css}" />
</head>
<body>
<th:block th:fragment="content">
    <div class="admin-header">
        <h1 class="admin-title"><i class="fa-solid fa-cogs"></i> Quản lý chi tiết sản phẩm | Manage Product Details</h1>
        <div class="admin-actions">
            <a th:href="@{'/admin/product/detail/add?productId=' + ${selectedProduct.id}}" class="admin-btn">
                <i class="fa-solid fa-plus"></i> Thêm chi tiết | Add Detail
            </a>
            <a th:href="@{/admin/product}" class="admin-btn">
                <i class="fa-solid fa-cogs"></i> Quản lý tổng hợp | General Management
            </a>
        </div>
    </div>

    <div class="admin-list-box">
        <div class="admin-list-box-header">
            <h2 class="admin-list-box-title">
                <i class="fa-solid fa-box"></i> Chi tiết sản phẩm | Product Details:
                <span th:text="${selectedProduct.name}"></span>
            </h2>
            <div>
                <span>Tồn kho | Stock: <strong th:text="${totalStock}"></strong></span>
                <span th:if="${selectedProduct != null}">
                    : <strong th:text="${selectedProduct.name}"></strong>
                </span>
            </div>
        </div>

        <div class="admin-table-container">
            <table class="admin-table">
                <thead>
                <tr>
                    <th class="id-column">STT | No.</th>
                    <th>Kích cỡ | Size</th>
                    <th>Màu sắc | Color</th>
                    <th>Số lượng | Quantity</th>
                    <th>Trạng thái | Status</th>
                    <th>Ngày tạo | Created At</th>
                    <th>Ngày cập nhật | Updated At</th>
                    <th>Ngày xóa | Deleted At</th>
                    <th class="action-column">Hành động | Actions</th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="detail, iterStat : ${productDetails}">
                    <td class="id-column" th:text="${iterStat.count}"></td>
                    <td th:text="${detail.kichCo.tenKichCo}"></td>
                    <td th:text="${detail.mauSac.tenMauSac}"></td>
                    <td th:text="${detail.soLuong}"></td>
                    <td>
                        <span class="admin-badge admin-badge-success" th:if="${detail.trangThai == true}"
                              th:text="'Hoạt động | Active'"></span>
                        <span class="admin-badge admin-badge-danger" th:if="${detail.trangThai == false}"
                              th:text="'Ngừng hoạt động | Inactive'"></span>
                    </td>
                    <td th:text="${#temporals.format(detail.createAt, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(detail.updateAt, 'dd/MM/yyyy')}"></td>
                    <td th:text="${detail.deleteAt != null} ? ${#temporals.format(detail.deleteAt, 'dd/MM/yyyy')} : '-'"></td>
                    <td class="action-column">
                        <a th:href="@{'/admin/product/detail/edit/' + ${detail.id}}" class="admin-icon-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                        <a th:href="@{'/admin/product/detail/delete/' + ${detail.id}}" class="admin-icon-btn admin-btn-delete">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
                <tr th:if="${productDetails.isEmpty()}">
                    <td colspan="9">Danh sách chi tiết sản phẩm là null! | Product details list is null!</td>
                </tr>
                </tbody>
            </table>
        </div>

        <div th:if="${productDetails.isEmpty()}">
            <div class="admin-alert admin-alert-info">
                <i class="fa-solid fa-info-circle"></i> Không có chi tiết sản phẩm nào | No product details available.
            </div>
        </div>
    </div>

    <div class="admin-actions">
        <a th:href="@{/admin}" class="admin-btn"><i class="fa-solid fa-arrow-left"></i> Quay lại | Back</a>
    </div>
</th:block>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/admin.js}"></script>
</body>
</html>
