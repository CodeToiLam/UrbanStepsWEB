<!DOCTYPE html>
<html th:lang="${#locale}" xmlns:th="http://www.thymeleaf.org"
      xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout"
      layout:decorate="~{layout/layout-admin}">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title th:text="#{product.detail.manage}">Quản lý chi tiết sản phẩm</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">
    <link rel="stylesheet" th:href="@{/css/admin.css}" />
</head>
<body>
<th:block th:fragment="content">
    <div class="admin-header">
        <h1 class="admin-title"><i class="fa-solid fa-cogs"></i> <span th:text="#{product.detail.manage}"></span></h1>
        <div class="admin-actions">
            <a th:href="@{'/admin/product/detail/add?productId=' + ${selectedProduct.id}}" class="admin-btn">
                <i class="fa-solid fa-plus"></i> <span th:text="#{product.detail.add2}"></span>
            </a>
            <a th:href="@{/admin/product}" class="admin-btn">
                <i class="fa-solid fa-cogs"></i> <span th:text="#{product.manage.overview}"></span>
            </a>
        </div>
    </div>

    <div class="admin-list-box">
        <div class="admin-list-box-header">
            <h2 class="admin-list-box-title">
                <i class="fa-solid fa-box"></i> <span th:text="#{product.detail.title}"></span>:
                <span th:text="${selectedProduct.name}"></span>
            </h2>
            <div>
                <span th:text="#{product.detail.stock}"></span>:
                <strong th:text="${totalStock}"></strong>
            </div>
        </div>

        <div class="admin-table-container">
            <table class="admin-table">
                <thead>
                <tr>
                    <th class="id-column" th:text="#{table.index}"></th>
                    <th th:text="#{product.size}"></th>
                    <th th:text="#{product.color}"></th>
                    <th th:text="#{product.quantity}"></th>
                    <th th:text="#{product.status}"></th>
                    <th th:text="#{product.createAt}"></th>
                    <th th:text="#{product.updateAt}"></th>
                    <th th:text="#{product.deleteAt}"></th>
                    <th class="action-column" th:text="#{table.action}"></th>
                </tr>
                </thead>
                <tbody>
                <tr th:each="detail, iterStat : ${productDetails}">
                    <td class="id-column" th:text="${iterStat.count}"></td>
                    <td th:text="${detail.kichCo.tenKichCo}"></td>
                    <td th:text="${detail.mauSac.tenMauSac}"></td>
                    <td th:text="${detail.soLuong}"></td>
                    <td>
                        <span class="admin-badge admin-badge-success" th:if="${detail.trangThai}" th:text="#{status.active}"></span>
                        <span class="admin-badge admin-badge-danger" th:if="${!detail.trangThai}" th:text="#{status.inactive}"></span>
                    </td>
                    <td th:text="${#temporals.format(detail.createAt, 'dd/MM/yyyy')}"></td>
                    <td th:text="${#temporals.format(detail.updateAt, 'dd/MM/yyyy')}"></td>
                    <td th:text="${detail.deleteAt != null} ? ${#temporals.format(detail.deleteAt, 'dd/MM/yyyy')} : '-'"></td>
                    <td class="action-column">
                        <a th:href="@{'/admin/product/detail/edit/' + ${detail.id}}" class="admin-icon-btn">
                            <i class="fa-solid fa-pen-to-square"></i>
                        </a>
                        <a th:href="@{'/admin/product/detail/delete/' + ${detail.id}}" class="admin-icon-btn admin-btn-delete">
                            <i class="fa-solid fa-trash"></i>
                        </a>
                    </td>
                </tr>
                <tr th:if="${productDetails.isEmpty()}">
                    <td colspan="9" th:text="#{product.detail.emptyTable}"></td>
                </tr>
                </tbody>
            </table>
        </div>

        <div th:if="${productDetails.isEmpty()}">
            <div class="admin-alert admin-alert-info">
                <i class="fa-solid fa-info-circle"></i> <span th:text="#{product.detail.noDetails}"></span>
            </div>
        </div>
    </div>

    <div class="admin-actions">
        <a th:href="@{/admin}" class="admin-btn">
            <i class="fa-solid fa-arrow-left"></i> <span th:text="#{button.back}"></span>
        </a>
    </div>
</th:block>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
<script th:src="@{/js/admin.js}"></script>
</body>
</html>
